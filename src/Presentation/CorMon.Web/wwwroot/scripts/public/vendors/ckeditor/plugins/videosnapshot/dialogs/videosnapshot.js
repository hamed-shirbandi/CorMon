CKEDITOR.dialog.add("videosnapshotDialog",function(b){return{title:"Video Snapshot",minWidth:400,minHeight:200,contents:[{id:"tab-basic",elements:[{type:"text",id:"video-url",label:"URL (Youtube)",validate:CKEDITOR.dialog.validate.notEmpty("Text field cannot be empty."),setup:function(a){this.setValue(a.getAttribute("href"))},commit:function(a){var b=CKEDITOR.plugins.getPath("videosnapshot")+"images/play.png";a.setAttribute("href",this.getValue());var c=this.getValue().split("watch?v=")[1];c&&a.setHtml('<img src="'+
("https://i.ytimg.com/vi/"+c+"/hqdefault.jpg")+'" style="max-width:480px;margin:auto;"/><span style="background-image: url('+b+'); background-repeat:no-repeat; background-position:center center; top:0; bottom:0; left:0; right:0; position:absolute; pointer-events:none; background-color:rgba(0,0,0,0.5);"> </span>')}}]}],onShow:function(){var a=b.getSelection().getStartElement();a&&(a.hasClass("video-snapshot-plugin")||a.getParent().hasClass("video-snapshot-plugin"))?(a.getParent().hasClass("video-snapshot-plugin")&&
(a=a.getParent()),this.insertMode=!1):(a=b.document.createElement("a"),a.setAttribute("class","video-snapshot-plugin"),a.setAttribute("target","_blank"),a.setAttribute("style","display:block;max-width:480px;position:relative;margin:auto;"),a.setAttribute("href",""),this.insertMode=!0);this.element=a;this.insertMode||this.setupContent(this.element)},onOk:function(){var a=this.element;this.commitContent(a);this.insertMode&&b.insertElement(a)}}});